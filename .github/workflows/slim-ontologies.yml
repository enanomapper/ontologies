name: workflow slim ontologies
on:
  workflow_dispatch:

jobs:
  get-scripts:
    runs-on: ubuntu-latest
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Get slimmer
    - name: get slimmer
      run: wget -nc https://github.com/enanomapper/slimmer/releases/download/v1.0.2/slimmer-1.0.2-jar-with-dependencies.jar 
    # Keep artifact
    - name: artifact slimmer 
      uses: actions/upload-artifact@v2
      with:
        name: slimmer
        path: slimmer-1.0.2-jar-with-dependencies.jar
      

# slim all ontologies
  
# slim bao
  slim-bao:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim bao
      run: bash scripts/src/build-workflow/slim.sh bao

  # apply props
      
# slim bfo
  slim-bfo:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim bfo
      run: bash scripts/src/build-workflow/slim.sh bfo

  # apply props
      
# slim ccont
  slim-ccont:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim ccont
      run: bash scripts/src/build-workflow/slim.sh ccont

  # apply props
      
# slim cheminf
  slim-cheminf:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim cheminf
      run: bash scripts/src/build-workflow/slim.sh cheminf

  # apply props
      
# slim chmo
  slim-chmo:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim chmo
      run: bash scripts/src/build-workflow/slim.sh chmo

  # apply props
      
# slim efo
  slim-efo:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim efo
      run: bash scripts/src/build-workflow/slim.sh efo

  # apply props
      
# slim fabio
  slim-fabio:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim fabio
      run: bash scripts/src/build-workflow/slim.sh fabio

  # apply props
      
# slim go
  slim-go:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim go
      run: bash scripts/src/build-workflow/slim.sh go

  # apply props
      
# slim iao
  slim-iao:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim iao
      run: bash scripts/src/build-workflow/slim.sh iao

  # apply props
      
# slim ncit
  slim-ncit:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim ncit
      run: bash scripts/src/build-workflow/slim.sh ncit

  # apply props
      
# slim npo
  slim-npo:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim npo
      run: bash scripts/src/build-workflow/slim.sh npo

  # apply props
      
# slim oae
  slim-oae:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim oae
      run: bash scripts/src/build-workflow/slim.sh oae

  # apply props
      
# slim obcs
  slim-obcs:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim obcs
      run: bash scripts/src/build-workflow/slim.sh obcs

  # apply props
      
# slim obi
  slim-obi:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim obi
      run: bash scripts/src/build-workflow/slim.sh obi

  # apply props
      
# slim pato
  slim-pato:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim pato
      run: bash scripts/src/build-workflow/slim.sh pato

  # apply props
      
# slim sio
  slim-sio:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim sio
      run: bash scripts/src/build-workflow/slim.sh sio

  # apply props
      
# slim uo
  slim-uo:
    runs-on: ubuntu-latest
    needs: get-scripts
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    # Authorize running slim script
    - name: authorize running slim.sh and slim-ncit.sh
      run: chmod 755 scripts/src/build-workflow/slim.sh scripts/src/build-workflow/slim-ncit.sh
    - name: get slimmer
      uses: actions/download-artifact@v2
      with:
       name: slimmer 
    - name: slim uo
      run: bash scripts/src/build-workflow/slim.sh uo

  # apply props
      
# apply props bao
  props-bao:
    runs-on: ubuntu-latest
    needs: slim-bao
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    - name: Apply props bao
      run: bash scripts/src/build-workflow/props.sh bao
    # )
    
# apply props cheminf
  props-cheminf:
    runs-on: ubuntu-latest
    needs: slim-cheminf
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    - name: Apply props cheminf
      run: bash scripts/src/build-workflow/props.sh cheminf
    # )
    
# apply props sio
  props-sio:
    runs-on: ubuntu-latest
    needs: slim-sio
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    - name: Apply props sio
      run: bash scripts/src/build-workflow/props.sh sio
    # )
    
  retrieve-owl-artifacts:
    # Keep slimmed ontology as an artifact
    runs-on: ubuntu-latest
    needs: [slim-bao, slim-bfo, slim-ccont, slim-cheminf, slim-chmo, slim-efo, slim-fabio, slim-go, slim-iao, slim-ncit, slim-npo, slim-oae, slim-obcs, slim-obi, slim-pato, slim-sio, slim-uo]
    steps:
    - name: owl slims artifact
      uses: actions/upload-artifact@v2
      with:
        name: owl-slims
        path: ./external/*slim.owl
