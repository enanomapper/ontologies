name: ROBOT-commands
on:
    
  workflow_run:
    workflows: ["Build slims"]
    types:
      - completed
    
    #schedule:
    workflow_run:
     workflows: ["CI build"]
     types:
      - completed
jobs:
    robot-workflows:
        runs-on: ubuntu-latest
        steps:
        - name: checkout repo
          uses: actions/checkout@v2
        - name: get robot
          run: |
            ls
            wget https://raw.githubusercontent.com/ontodev/robot/master/bin/robot
            wget https://github.com/ontodev/robot/releases/download/v1.9.0/robot.jar
            chmod 777 robo*
    
        - name: merge
          run: sh robot merge -i enanomapper.owl -o enanomapper-full-temp.owl
        - name: report
          run: sh robot report --fail-on none -i enanomapper-full-temp.owl -o robot-report/report.tsv
        - name: diff
          run: |
            sh robot diff --left enanomapper-full.owl --right enanomapper-full-temp.owl --output robot-report/diff.txt
            rm enanomapper-full.owl
            mv enanomapper-full-temp.owl enanomapper-full.owl
        - name: reason
          run: sh robot reason --reasoner ELK --annotate-inferred-axioms true --input enanomapper-full.owl --output enanomapper-reasoned.owl
  
  # Upload artifacts
        - name: 'Upload eNanoMapper-full'
          uses: actions/upload-artifact@v3
          with:
            name: enanomapper-files
            path: enanomapper-*
        - name: 'Upload report'
          uses: actions/upload-artifact@v3
          with:
            name: report
            path: ./robot-report/* 
  